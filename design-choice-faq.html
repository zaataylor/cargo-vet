<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Design Choice FAQ - Cargo Vet</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="rationale.html"><strong aria-hidden="true">1.1.</strong> Rationale &amp; Design</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">1.2.</strong> Installation</a></li><li class="chapter-item expanded "><a href="setup.html"><strong aria-hidden="true">1.3.</strong> Setup</a></li><li class="chapter-item expanded "><a href="audit-criteria.html"><strong aria-hidden="true">1.4.</strong> Audit Criteria</a></li><li class="chapter-item expanded "><a href="importing-audits.html"><strong aria-hidden="true">1.5.</strong> Importing Audits</a></li><li class="chapter-item expanded "><a href="recording-audits.html"><strong aria-hidden="true">1.6.</strong> Recording Audits</a></li><li class="chapter-item expanded "><a href="performing-audits.html"><strong aria-hidden="true">1.7.</strong> Performing Audits</a></li><li class="chapter-item expanded "><a href="specifying-policies.html"><strong aria-hidden="true">1.8.</strong> Specifying Policies</a></li><li class="chapter-item expanded "><a href="multiple-repositories.html"><strong aria-hidden="true">1.9.</strong> Multiple Repositories</a></li><li class="chapter-item expanded "><a href="configuring-ci.html"><strong aria-hidden="true">1.10.</strong> Configuring CI</a></li></ol></li><li class="chapter-item expanded "><a href="reference.html"><strong aria-hidden="true">2.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="config.html"><strong aria-hidden="true">2.1.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="audit-entries.html"><strong aria-hidden="true">2.2.</strong> Audit Entries</a></li><li class="chapter-item expanded "><a href="built-in-criteria.html"><strong aria-hidden="true">2.3.</strong> Built-In Criteria</a></li><li class="chapter-item expanded "><a href="commands.html"><strong aria-hidden="true">2.4.</strong> Commands</a></li><li class="chapter-item expanded "><a href="how-vetting-works.html"><strong aria-hidden="true">2.5.</strong> How Vetting Works</a></li><li class="chapter-item expanded "><a href="design-choice-faq.html" class="active"><strong aria-hidden="true">2.6.</strong> Design Choice FAQ</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Cargo Vet</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="design-choice-faq"><a class="header" href="#design-choice-faq">Design Choice FAQ</a></h1>
<p>This section serves to document the rationale behind various design choices and
highlight some alternatives considered. This should be considered supplementary
to the <a href="./rationale.html">Rationale &amp; Design</a> section.</p>
<h2 id="what-about-crates-where-i-trust-the-author"><a class="header" href="#what-about-crates-where-i-trust-the-author">What about crates where I trust the author?</a></h2>
<p>You might find yourself using a crate authored either by someone you personally
know or by a well-known member the community, in which case you might see low
value in an additional audit. In this situation, you are of course free to
simply leave the crate in the <code>unaudited</code> list indefinitely, perhaps with a
<code>suggest = false</code> and note indicating that this specific audit is a low priority.</p>
<p>There are, of course, dangers in being too permissive in these cases. Crates are
often a collaborative effort, and it may not be the case that this trusted
individual personally reviewed every contribution to date and will continue to
do so forever. If the author has the authority to certify audits for your
project, a better approach is to have them contribue the audit directly to your
<code>audits.toml</code>.</p>
<h2 id="why-does-cargo-vet-init-automatically-exempt-all-existing-dependencies"><a class="header" href="#why-does-cargo-vet-init-automatically-exempt-all-existing-dependencies">Why does <code>cargo vet init</code> automatically exempt all existing dependencies?</a></h2>
<p>A key goal of <code>cargo vet</code> is to make it very easy to go from first learning
about the tool to having it running on CI. Having an open-ended task — like
auditing one or more crates — on that critical path increases the chance that
the developer gets side-tracked and never completes the setup. So the idea is to
enable developers to quickly get to a green state, and then use <code>cargo vet suggest</code> to ratchet down the set of unaudited code at their own pace.</p>
<h2 id="why-does-cargo-vet-require-audits-for-overridden-dependencies"><a class="header" href="#why-does-cargo-vet-require-audits-for-overridden-dependencies">Why does <code>cargo vet</code> require audits for overridden dependencies?</a></h2>
<p>Cargo supports <a href="https://doc.rust-lang.org/cargo/reference/overriding-dependencies.html">dependency
overrides</a>,
which allows developers to replace public crates in their dependency graph with
a custom version. Strictly speaking, these overrides are first-party code, but
<code>cargo vet</code> nevertheless requires a corresponding audit for the public version.</p>
<p>The reason is that this custom version might be generated in one of two ways: by
building a semantically-compatible replacement from scratch, or by starting with
the source of the original crate and making some (potentially-minimal)
modifications. The latter case is quite common, and in practice rarely entails a
full audit of the original crate despite formally transforming it into
first-party code.  Since <code>cargo vet</code> has no way to distinguish this case from a
from-scratch rewrite, it conservatively assumes the override is a derivative
work, and requires the original version to be audited. The from-scratch can be
handled by adding an entry to the <code>unaudited</code> table with <code>suggest = false</code> and a
note explaining the situation.</p>
<h2 id="how-does-this-relate-to-cargo-crev"><a class="header" href="#how-does-this-relate-to-cargo-crev">How does this relate to <code>cargo crev</code>?</a></h2>
<p>This work was partially inspired by <code>cargo crev</code>, and borrows some aspects
from its design. We are grateful for its existence and the hard work behind it.
<code>cargo vet</code> makes a few design choices that differ from <code>cargo crev</code>:</p>
<ul>
<li><strong>Project-Oriented:</strong> <code>cargo vet</code> is geared towards usage by organizations,
and therefore does not separate audits by individual developer. Consequently,
it does not have a separate identity and authentication layer.</li>
<li><strong>No Web-of-Trust:</strong> there is no notion of transitive trust. The decision to
trust audits performed by another party is independent of that party's trust
choices, which might be rooted in a different threat model.</li>
<li><strong>Automated Enforcement:</strong> <code>cargo vet</code> is designed to be run as an enforcement
tool for projects to manage (rather than just inspect) their supply chains,
and consequently has a number of affordances in this direction.</li>
<li><strong>Audit Criteria:</strong> <code>cargo vet</code> supports recording
<a href="audit-criteria.html">multiple kinds of audits</a>.</li>
</ul>
<p>Eventually, it could make sense to implement some form of bridging between the
two systems.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="how-vetting-works.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="how-vetting-works.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
